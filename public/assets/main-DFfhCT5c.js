import{f as a}from"./fetch-CWtgV7mw.js";const u=document.querySelector(".createuser");u.addEventListener("click",async o=>{o.preventDefault(),console.log("Nyt luodaan käyttäjä");const e="https://trdns.northeurope.cloudapp.azure.com/api/users",t=document.querySelector(".create_user_form"),c={username:t.querySelector("input[name=username]").value,password:t.querySelector("input[name=password]").value,email:t.querySelector("input[name=email]").value},l={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)};try{const r=await a(e,l);console.log(r)}catch(r){console.error(r)}});const i=document.querySelector(".loginuser");i.addEventListener("click",async o=>{o.preventDefault(),console.log("Nyt logataan sisään");const e=document.querySelector(".login_form");e.querySelector("input[name=username]").value,e.querySelector("input[name=password]").value});const m=document.querySelector("#meRequest");m.addEventListener("click",async()=>{console.log("Testataan TOKENIA ja haetaan käyttäjän tiedot");const o="https://trdns.northeurope.cloudapp.azure.com/api/auth/me",e=localStorage.getItem("token");console.log("Tämä on haettu LocalStoragesta",e);const t={method:"GET",headers:{Authorization:"Bearer "+e}};console.log(t),a(o,t).then(n=>{console.log(n),s("meResponse",`Authorized user info: ${JSON.stringify(n)}`)})});const d=document.querySelector("#clearButton");d.addEventListener("click",p);function s(o,e){document.getElementById(o).innerText=e}function p(){localStorage.removeItem("token"),s("clearResponse","localStorage cleared!")}
